!function(){"use strict";var t=_.template('\n<%if (typeof lazysizesBlurhash !== \'undefined\') {%>\n<span class="setting lazysizes-blurhash">\n\t<span class="name">Lazysizes Blurhash</span>\n\t<span class="value" <%= !lazysizesBlurhash ? \'style="padding-top: 0;"\' : \'\' %>>\n\t\t<%if (!lazysizesBlurhash) {%>\n\t\t\t<span>\n\t\t\t\t<%= lazysizesStrings.notGenerated %>\n\t\t\t</span>\n\t\t\t<button type="button" class="button button-primary lazysizes-blurhash-generate" <%= lazysizesLoading ? \'disabled\' : \'\' %>><%= lazysizesStrings.generate %></button>\n\t\t<%} else {%>\n\t\t\t<div style="padding-bottom: 8px;">\n\t\t\t\t<%= lazysizesStrings.current + lazysizesBlurhash %>\n\t\t\t</div>\n\t\t\t<button type="button" class="button lazysizes-blurhash-delete" <%= lazysizesLoading ? \'disabled\' : \'\' %>><%= lazysizesStrings.delete %></button>\n\t\t<%}%>\n\t\t<span class="spinner <%= lazysizesLoading ? \'is-active\' : \'\' %>" style="padding-top: 0; float: none; min-width: 20px;"></span>\n\t\t<%if (lazysizesError) {%>\n\t\t\t<div>\n\t\t\t\t<%= lazysizesError %>\n\t\t\t</div>\n\t\t<%}%>\n\t</span>\n</span>\n<p class="description">\n\t<%= lazysizesStrings.description %>\n</p>\n<%} else {%>\n<span class="setting lazysizes-blurhash">\n\t<span class="name" style="margin-left: 0; margin-right: 0;">Lazysizes Blurhash</span>\n\t<span class="value" style="padding-top: 0;">\n\t<span class="spinner <%= lazysizesLoading ? \'is-active\' : \'\' %>" style="padding-top: 0; float: none; min-width: 20px;"></span>\n\t</span>\n</span>\n<%}%>\n'),s=function(t){var s=this,e="";if(void 0===t)e="fetch";else if(t.target.classList.contains("lazysizes-blurhash-generate"))e="generate";else{if(!t.target.classList.contains("lazysizes-blurhash-delete"))return;e="delete"}this.lsModel.set("lazysizesLoading",!0),function(t,s,e,i){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"lazysizes_blurhash",nonce:e,mode:t,attachmentId:s},success:i,error:i})}(e,this.model.attributes.id,this.model.attributes.nonces.lazysizes[e],(function(t,i,a){s.lsModel.set("lazysizesLoading",!1),"error"===i?s.lsModel.set("lazysizesError","".concat(lazysizesStrings.error," (").concat(a,")")):t.success?"fetch"===e||"generate"===e?s.lsModel.set("lazysizesBlurhash",t.blurhash):"delete"===e&&s.lsModel.set("lazysizesBlurhash",!1):s.lsModel.set("lazysizesError",t.data[0].message)}))},e={lazysizesBlurhash:void 0,lazysizesError:!1,lazysizesLoading:!1},i=wp.media.view.Attachment.Details.TwoColumn;wp.media.view.Attachment.Details.TwoColumn=i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.lsModel=new Backbone.Model(e),this.listenTo(this.model,"change",this.render),this.listenTo(this.lsModel,"change",this.render)},events:{"click .setting.lazysizes-blurhash .button":s},render:function(){return i.prototype.render.apply(this,arguments),void 0!==this.lsModel.attributes.lazysizesBlurhash||void 0===this.model.attributes.nonces||this.lsModel.attributes.lazysizesLoading||s.apply(this),this.views.detach(),"image"===this.model.attributes.type&&this.$el.find(".settings").append(t(this.lsModel.toJSON())),this.views.render(),this}});var a=wp.media.view.Attachment.Details;wp.media.view.Attachment.Details=a.extend({initialize:function(){a.prototype.initialize.apply(this,arguments),this.lsModel=new Backbone.Model(e),this.listenTo(this.model,"change",this.render),this.listenTo(this.lsModel,"change",this.render)},events:{"click .setting.lazysizes-blurhash .button":s},render:function(){return a.prototype.render.apply(this,arguments),void 0!==this.lsModel.attributes.lazysizesBlurhash||void 0===this.model.attributes.nonces||this.lsModel.attributes.lazysizesLoading||s.apply(this),this.views.detach(),"image"===this.model.attributes.type&&this.$el.append(t(this.lsModel.toJSON())),this.views.render(),this}})}();
