"use strict";!function(t,e){var i=function(){e(t.lazySizes),t.removeEventListener("lazyunveilread",i,!0)};e=e.bind(null,t,t.document),"object"==typeof module&&module.exports?e(require("lazysizes")):"function"==typeof define&&define.amd?define(["lazysizes"],e):t.lazySizes?i():t.addEventListener("lazyunveilread",i,!0)}(window,(function(t,e,i){if(t.addEventListener){var a,o,n,r,s,d=Array.prototype.forEach,c=/^picture$/i,u=function(e){return t.matchMedia?(u=function(t){return!t||(matchMedia(t)||{}).matches})(e):t.Modernizr&&Modernizr.mq?!e||Modernizr.mq(e):!e},f=i.aC,l=i.rC,m=i.cfg;p.prototype={_setupEvents:function(){var t,i,a=this,o=function(t){t.naturalWidth<36?a.addAspectRatio(t,!0):a.removeAspectRatio(t,!0)},n=function(){a.processImages()};e.addEventListener("load",(function(t){t.target.getAttribute&&t.target.getAttribute("data-aspectratio")&&o(t.target)}),!0),addEventListener("resize",(i=function(){d.call(a.ratioElems,o)},function(){clearTimeout(t),t=setTimeout(i,99)})),e.addEventListener("DOMContentLoaded",n),addEventListener("load",n)},processImages:function(t){var i,a;t||(t=e),i="length"in t&&!t.nodeName?t:t.querySelectorAll("img[data-aspectratio]");for(a=0;a<i.length;a++)i[a].naturalWidth>36?this.removeAspectRatio(i[a]):this.addAspectRatio(i[a])},getSelectedRatio:function(t){var e,i,a,o,n,r=t.parentNode;if(r&&c.test(r.nodeName||""))for(e=0,i=(a=r.getElementsByTagName("source")).length;e<i;e++)if(o=a[e].getAttribute("data-media")||a[e].getAttribute("media"),m.customMedia[o]&&(o=m.customMedia[o]),u(o)){n=a[e].getAttribute("data-aspectratio");break}return n||t.getAttribute("data-aspectratio")||""},parseRatio:(r=/^\s*([+\d\.]+)(\s*[\/x]\s*([+\d\.]+))?\s*$/,s={},function(t){var e;return!s[t]&&(e=t.match(r))&&(e[3]?s[t]=e[1]/e[3]:s[t]=1*e[1]),s[t]}),addAspectRatio:function(e,i){var a,o=e.offsetWidth,n=e.offsetHeight;i||f(e,"lazyaspectratio"),o<36&&n<=0?(o||n&&t.console)&&console.log("Define width or height of image, so we can calculate the other dimension"):(a=this.getSelectedRatio(e),(a=this.parseRatio(a))&&(o?e.style.height=o/a+"px":e.style.width=n*a+"px"))},removeAspectRatio:function(t){l(t,"lazyaspectratio"),t.style.height="",t.style.width="",t.removeAttribute("data-aspectratio")}},(o=function(){(n=t.jQuery||t.Zepto||t.shoestring||t.$)&&n.fn&&!n.fn.imageRatio&&n.fn.filter&&n.fn.add&&n.fn.find?n.fn.imageRatio=function(){return a.processImages(this.find("img[data-aspectratio]").add(this.filter("img[data-aspectratio]"))),this}:n=!1})(),setTimeout(o),a=new p,t.imageRatio=a,"object"==typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd&&define(a)}function p(){this.ratioElems=e.getElementsByClassName("lazyaspectratio"),this._setupEvents(),this.processImages()}}));
