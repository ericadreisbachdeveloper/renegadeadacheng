/* ------------------------
 Adaptive
------------------------ */




// Small devices (landscape phones, 37.5rem and up)
@media (min-width: 37.5rem) {


  // Breakpoint - small
  %breakpoint { background: yellow; content: 'SMALL'; }


  // Structure - small
  // Blocks - small
  .wp-block-media-text > figure + .wp-block-media-text__content,
  .wp-block-media-text > .wp-block-media-text__content + figure {
    padding-top: 0;
  }

}




// Medium devices (tablets, 48rem and up)
@media (min-width: 48rem) {


  // Breakpoint - medium
  %breakpoint { background: yellowgreen; content: 'MEDIUM'; }



  // Structure - medium
  %container-corset { margin-top: 0; margin-bottom: 0; }
  %container { margin-right: auto; margin-left: auto; }


  .-mobile { display: none; }
  .-desktop { display: block; }



  // Typography - medium
  %monster { font-size: 4rem;  }
  %huge    { font-size: 3rem; }
  %large   { font-size: 2.5rem;  }
  %medium  { font-size: 2rem; }
  %text    { font-size: 1rem; }
  %small   { font-size: .9rem; }



  // Header - medium
  $headerh: 6rem;

  .site-header { height: $headerh; }

  .site-header > .container { position: relative; }

  .site-header > .container {
    &> .logo-div, &> .nav {
      position: relative;
      z-index: 10;
    }
  }


  .site-header .logo-div {
    display: block;
    float: left;
  }

  .site-header .logo-div { height: $headerh; }

  $logoh: 5.4rem;

  .site-header .logo-img { height: $logoh; width: auto; max-width: 100%; }




  .wp-block-cover .wp-block-cover__inner-container {
    [class*="core"]{ max-width: 50%; }
  }

  .home { .wp-block-cover, .wp-block-cover-image { min-height: 32em; } }



  // Nav - medium
  .nav[role="navigation"] { float: left; padding-left: 2rem; }
  .navbar-toggler { display: none; }
  .navbar-collapse.collapse { display: block; }


  .logo-div { float: left; }
  .nav { float: right; }


  #navmenu > .container-on-mobile { width: auto; min-height: 0; }


  // nav element heights 100%
  .nav,
  .nav > #navmenu,
  .nav > #navmenu .navbar-nav { height: 100%; }


  #navmenu {
    width: auto;
    background: none;
    position: static;
  }

  #navmenu .navbar-nav {
    width: auto;
    overflow: visible;

    @include flex;
    @include align-items(center);

    a {
      color: $nearblack;
    }
  }

  $navpad_vertical: .6rem;
  $navpad_left: 1.44rem;
  $navpad_nochildren_right: $navpad_left;
  $navpad_haschildren_right: 1.8rem;

  #navmenu .navbar-nav > li {
    display: inline-block;
    font-size: .85rem;
    position: relative;

    &:not(.menu-item-has-children) > a {
      padding-right: $navpad_nochildren_right;
    }

    &.menu-item-has-children > a {
      padding-right: $navpad_haschildren_right;
    }

    &> a {
      padding-top: $navpad_vertical;
      padding-bottom: $navpad_vertical;
      padding-left: $navpad_left;

      @include hover { color: $nearblack; }
    }


    // hover behavior - medium
    &:not(.menu-item-has-children) > a {

      &:before, &:after {
        width: 0;
        height: .12rem;
        background: $nearblack;
        content: '';
        display: block;
        position: absolute;
         top: unset;
         bottom: .2rem;
        @include border-radius(0);
        @include transition-one(width);
      }

      &:before { left: 50%; }
      &:after { right: 50%; }

      // on hover
      @include hover {
        &:before, &:after  {
          width: calc( (100% - (2 * #{$navpad_left}) ) / 2 );
        }
      }
    }
  }

  #navmenu .navbar-nav>li { border: none; }
  #navmenu .navbar-nav>li:last-of-type { border: none; }




  // Submenu - medium

  // hide mobile carets
  #navmenu .navbar-nav .menu-item-has-children > .open-submenu-a {
    width: 1.8rem;
    height: 100%;
     right: 0;

    &:after {
      width: 1.8rem;
      height: 100%;
      background-image: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='18' height='8' overflow='visible'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' fill='111111' d='M12.598 0L6.529 5.859 0 0h12.598z'/%3E%3C/svg%3E");
      background-position: .3rem 52%;
      background-size: 1rem;
      @include transform(0deg,1,0deg,0,0);
    }

    &.mobile-show-submenu:after { @include transform(0deg,1,0deg,0,0); }
  }


  #navmenu .navbar-nav .menu-item-has-children > .open-submenu-a + .sub-menu,
  #navmenu .navbar-nav .menu-item-has-children > .open-submenu-a.mobile-show-submenu + .sub-menu {
    width: 14rem;
    height: auto;
    background: white;
    display: block;
    overflow: visible;
    padding-top: .5rem;
    padding-bottom: .5rem;
    position: absolute;
     left: -9999px;
    z-index: 800;
    @include box-shadow(inset,0,-.05rem,.2rem,rgba(0,0,0,.2));

    a {
      background: transparent;
      margin-right: 0;
      padding: .6em 1.44em .6em 1.5em;
      @include transition-one(background);

      @include hover {
        background: rgba(0,0,0,.1);
      }
    }
  }

  #navmenu .navbar-nav .menu-item-has-children.hover,
  #navmenu .navbar-nav .menu-item-has-children.show {
    &> .open-submenu-a + .sub-menu {
      left: 0;
    }
  }

  #navmenu .navbar-nav>li:first-of-type { margin-top: 0; }
  #navmenu .navbar-nav>li:last-of-type { margin-bottom: 0; }




  #navmenu .navbar-nav > .menu-item-has-children {
    white-space: nowrap;

    &> ul { white-space: initial; }
  }



  // Dropdown menu - medium
  // Submenu - medium
  // Sub-menu - medium

  #navmenu .navbar-nav .menu-item-has-children {

    &> .open-submenu-a + .sub-menu  {
      max-height: unset;
      clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
      @include transition-multi(clip-path .2s ease-in-out, max-height .2s ease-in-out);

    }

    &.hover, &.show {
      &> .open-submenu-a + .sub-menu {
        max-height: 40rem;
        clip-path: polygon(0 0, 100% 0, 100% 100%, 0 100%);
      }
    }
  }




  // Current Children - medium
  // Current Nav Children - medium
  // ... on mobile this is the circle
  %current-nav-a:before { display: none; }


  // Current Parents - medium
  // Current Nav Top level - medium
  // Current Nav Parents - medium
  %current-page-or-current-parent-li {

    // ... on mobile bg is gray
    background: none;

    &:not(.menu-item-has-children) > a:before,
    &:not(.menu-item-has-children) > a:after {
      // set width of underlines on childless top level nav items
      width: calc( (100% - (2 * #{$navpad_left}) ) / 2 );
    }

    &.menu-item-has-children > a:before,
    &.menu-item-has-children > a:after {
      // set width of underlines on parent top level nav items
      width: calc( (100% - ( #{$navpad_left} + #{$navpad_haschildren_right} ) ) / 2);
      background: $nearblack;
    }

    // set position of left underline - same for all top level nav items
    &> a:before { left: $navpad_left;  }

    // set position of right underlines
    &:not(.menu-item-has-children) > a:after { right: $navpad_nochildren_right; }
          &.menu-item-has-children > a:after { right: $navpad_haschildren_right; }

    // style underlines on top level nav items
    &> a:before,
    &> a:after {
      height: .12rem;
      background: $nearblack;
      content: '';
      display: block;
      position: absolute;
       top: unset;
       bottom: .2rem;
      @include border-radius(0);
    }
  }



  // Search - medium
  #navmenu {
    .container-on-mobile { @include flex; }

    .search {
      width: 2rem;
      height: 100%;
      @include flex;
      @include align-items(center);
    }

    [href="#display-search"] {
      display: block;
      width: 2rem;
      height: 2rem;
      background: transparent;
      color: $nearblack;

      @include flex;
      @include align-items(center);
      @include justify-content(center);
      @include transition-multi(color .2s ease-in-out, background .2s ease-in-out);


      @include hover { text-decoration: none; color: white; background: $nearblack;  }

      &:after {
        content: '\f002';
        display: block;
        font-family: 'Font Awesome 5 Free';
      }
    }


    .search-input, .search-submit {
      position: fixed;
    }

    .search-input {
      width: calc( 100% - 6rem);
      background: $nearblack;
      color: white;
      display: block;
       left: 0;
      text-align: center;
      z-index: -1;
      @include placeholder {color: lightgray; text-indent: -3.5rem; }
    }

    .search-input, .search-submit {
      max-height: 0;
      opacity: 0;
      top: $headerh;
      @include transition-multi(max-height .2s ease-in-out, opacity .2s ease-in-out);
    }


    .search-submit {
      display: block;
      width: 2rem;
      height: 2rem;
       top: 6.4rem;
       right: 3.5rem;
      &:after { color: white; }
    }

    .show-search {
      .search-input, .search-submit {
        max-height: 4rem;
        opacity: 1;
        z-index: 10;
      }
    }
  }




  // Blog - medium
  .meta-div {
    min-height: 2em;

    .meta-time { width: 25%; }
    .meta-author { width: 25%; }
    .meta-categories { width: 50%; }

    .meta-author, .meta-categories { border-top: 1px solid gray; }
  }



  // Home - medium

  // Columns - medium
  body:not(.home) .wp-block-columns {
    @include flex-wrap(nowrap);

    &> .wp-block-column + .wp-block-column { padding-left: 2em; }
  }

  .home .wp-block-columns { @include justify-content(center); }
  .home .wp-block-column { max-width: 32em; }



  .home .wp-block-column .core-heading {
    min-height: 8.2em;
  }

  .home .wp-block-column .core-heading + .core-paragraph {
    min-height: 6em;
  }



  body:not(.home) .gutenberg-section.core-cover { margin-bottom: 3em; }

  body:not(.home) .gutenberg-section.core-columns h2 { margin-top: 0; }

  body:not(.home) .gutenberg-section.core-columns + .gutenberg-section.core-columns {
    margin-top: 2em;
  }




  // Footer - medium
   #menu-footer, #menu-social { text-align: center; }

   #menu-footer li { display: inline-block; padding: .8em 1.5em;  }

}








// Large devices (desktops, 62rem and up)
@media (min-width: 62rem) {

  // Breakpoint - large
  %breakpoint { background: dodgerblue; content: 'LARGE'; }


  // Structure - large
  $container: 57rem;
  %container { width: $container; }

  %container-corset { width: 48rem; margin-right: auto; margin-left: auto; }

  %container-gutter { width: calc( #{$container} - 30px); margin-right: auto; margin-left: auto; }



  // Home - large
  .home .wp-block-columns { @include justify-content(unset); }

  .home .wp-block-columns.has-3-columns .wp-block-column {
    max-width: calc(33.3333% - 32px);
  }


  .home .wp-block-columns.has-2-columns > .wp-block-column {
    width: calc(33.3333% - 32px);
    max-width: calc(33.3333% - 32px);
  }

  .home .wp-block-columns.has-2-columns > .wp-block-column:first-of-type { margin-left: calc(16.666%); }
  .home .wp-block-columns.has-2-columns > .wp-block-column:nth-of-type(3) { margin-right: calc(16.666%); }

  .home .wp-block-columns.has-2-columns .wp-block-column:nth-of-type(2),
  .home .wp-block-columns.has-3-columns .wp-block-column:nth-of-type(2) { margin-left: 32px; }

  .home .wp-block-columns.has-3-columns .wp-block-column:nth-of-type(3) {
    margin-left: 32px;
  }






  // Sticky Footer - large
  $footerh: 15rem;
  .wrapper { min-height: 100vh; margin-bottom: -$footerh; }
  .wrapper:after { content: ''; display: block; clear: both; }
  .wrapper:after, .site-footer { height:$footerh; }



  // Footer - large
  #menu-social {
    padding-top: .8em;
    text-align: right;
    position: relative;
     right: -.6em;

    li a {
      width: 1.8em;
      height: 1.8em;

      &:before { font-size: 1.1rem; }
    }
  }

  #menu-footer {
    position: relative;
    left: -1.1em;
    text-align: left;
    li { font-size: .85rem; }
  }


  .col-footer:first-of-type { float: left; width: 66.666%; }
  .col-footer:nth-of-type(2) { float: right; width: 33.333%; }


}




// Extra large devices (large desktops, 75rem and up)
@media (min-width: 75rem) {

  // Breakpoint - wide
  %breakpoint { background: mediumpurple; content: 'WIDE'; }


  // Home - wide
  .site-header {
    width: 100%;
    background: white;
    position: fixed;
     top: 0;
    @include simple-box-shadow(0,0,1em,rgba(0,0,0,.2));
  }

  [data-role="main"] { padding-top: 6em; }



  // Structure - wide
  $container: 73rem;
  %container { width: $container; }

  %container-wide { width: calc(#{$container} - 30px); margin-right: auto; margin-left: auto; }

  %container-gutter { width: calc( #{$container} - 30px); }


  // Home - wide
  .caption-container { left: -($container); }
  .caption-extra { width: calc((100% - #{$container}) / 2); }


}
